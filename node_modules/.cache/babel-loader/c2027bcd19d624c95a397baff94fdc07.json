{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\brsch\\\\github\\\\githubWebsite\\\\src\\\\components\\\\CharterProject.js\";\nimport React from 'react';\nimport initSqlJs from 'sql.js';\nconst dataStyle = {\n  whiteSpace: 'pre-wrap'\n}; //var database\n\nclass CharterProject extends React.Component {\n  constructor(props) {\n    super(props);\n    this.loadDataset();\n    this.state = {\n      database: null,\n      SQLresponse: null\n    };\n  }\n\n  calculatePoints(name) {\n    var amounts = this.getQuery(\"SELECT Amount FROM transactionData WHERE CustomerName='\" + name + \"'\");\n    let points = 0;\n\n    for (var i = 0; i < amounts.length; i++) {\n      var amount = Math.floor(amounts[i][0]);\n\n      if (amount > 100) {\n        points += 2 * (amount - 100) + 50;\n      } else if (amount > 50) {\n        points += amount - 50;\n      }\n    }\n\n    return points;\n  }\n\n  getPoints() {\n    var namesArr = this.getQuery(\"SELECT DISTINCT CustomerName FROM transactionData\");\n    var names = {};\n\n    for (var i = 0; i < namesArr.length; i++) {\n      names[namesArr[i][0]] = this.calculatePoints(namesArr[i][0]);\n    }\n\n    this.setState({\n      SQLresponse: this.printData(names)\n    });\n  }\n\n  getQuery(query) {\n    return this.state.database.exec(query)[0][\"values\"];\n  }\n\n  async loadDataset() {\n    const sqlPromise = initSqlJs({\n      locateFile: file => `sql-wasm.wasm`\n    });\n    const dataPromise = fetch(\"transactionSQL.sqlite\").then(res => res.arrayBuffer());\n\n    try {\n      const [SQL, buf] = await Promise.all([sqlPromise, dataPromise]);\n      var db = new SQL.Database(new Uint8Array(buf));\n      this.setState({\n        database: db\n      });\n    } catch (err) {\n      console.log(err);\n      console.log(\"Failed to load database\");\n    }\n\n    console.log(\"db: \", this.state.database);\n  }\n\n  printData(data) {\n    if (data != null) {\n      var output = \"\";\n\n      for (const [key, value] of Object.entries(data)) {\n        output += String(key) + \": \" + String(value) + \"\\n\";\n      }\n\n      return output;\n    } else return \"goodbye\";\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      style: dataStyle,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, this.state.SQLresponse), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.getPoints(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, \" Get Points \"));\n  }\n\n}\n\nexport default CharterProject;","map":{"version":3,"sources":["C:/Users/brsch/github/githubWebsite/src/components/CharterProject.js"],"names":["React","initSqlJs","dataStyle","whiteSpace","CharterProject","Component","constructor","props","loadDataset","state","database","SQLresponse","calculatePoints","name","amounts","getQuery","points","i","length","amount","Math","floor","getPoints","namesArr","names","setState","printData","query","exec","sqlPromise","locateFile","file","dataPromise","fetch","then","res","arrayBuffer","SQL","buf","Promise","all","db","Database","Uint8Array","err","console","log","data","output","key","value","Object","entries","String","render"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport initSqlJs from 'sql.js';\r\n\r\nconst dataStyle = {\r\n  whiteSpace: 'pre-wrap'\r\n}\r\n\r\n//var database\r\n\r\nclass CharterProject extends React.Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.loadDataset()\r\n    this.state={\r\n      database: null,\r\n      SQLresponse: null,\r\n    }\r\n\r\n  }\r\n\r\n  calculatePoints(name) {\r\n    var amounts = this.getQuery(\"SELECT Amount FROM transactionData WHERE CustomerName='\" + name + \"'\")\r\n    let points = 0\r\n    for (var i = 0; i < amounts.length; i++) {\r\n      var amount = Math.floor(amounts[i][0])\r\n      if (amount > 100) {\r\n        points += 2 * (amount - 100) + 50\r\n      }\r\n      else if (amount > 50) {\r\n        points += (amount - 50)\r\n      }\r\n    }\r\n    return points\r\n  }\r\n\r\n  getPoints() {\r\n    var namesArr = this.getQuery(\"SELECT DISTINCT CustomerName FROM transactionData\")\r\n    var names = {}\r\n    for (var i = 0; i < namesArr.length; i++) {\r\n      names[namesArr[i][0]] = this.calculatePoints(namesArr[i][0]);\r\n    }\r\n    this.setState({\r\n      SQLresponse: this.printData(names)\r\n    })\r\n  }\r\n\r\n  getQuery(query) {\r\n    return this.state.database.exec(query)[0][\"values\"]\r\n  }\r\n\r\n  async loadDataset () {\r\n    const sqlPromise = initSqlJs({locateFile: file => `sql-wasm.wasm`});\r\n    const dataPromise = fetch(\"transactionSQL.sqlite\").then(res => res.arrayBuffer());\r\n    try {\r\n      const [SQL, buf] = await Promise.all([sqlPromise, dataPromise])\r\n        var db = new SQL.Database(new Uint8Array(buf));\r\n        this.setState({\r\n          database: db\r\n        })\r\n    }\r\n    catch (err) {\r\n      console.log(err);\r\n      console.log(\"Failed to load database\")\r\n    }\r\n    console.log(\"db: \", this.state.database)\r\n  }\r\n\r\n  printData(data) {\r\n    if (data != null) {\r\n      var output = \"\"\r\n      for (const [key, value] of Object.entries(data)) {\r\n        output += String(key) + \": \" + String(value) + \"\\n\"\r\n      }\r\n      return output\r\n    }\r\n    else return \"goodbye\"\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div>\r\n      <p style={dataStyle}>\r\n        {this.state.SQLresponse}\r\n      </p>\r\n        <button onClick={() => this.getPoints()}> Get Points </button>\r\n      </div>)\r\n  }\r\n}\r\n\r\nexport default CharterProject;\r\n"]},"metadata":{},"sourceType":"module"}